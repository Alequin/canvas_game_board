{"version":3,"sources":["webpack:///webpack/bootstrap fcd671a589b9410700df","webpack:///./src/run.js","webpack:///./src/board.js","webpack:///./src/square.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;ACzCA;;AAEA;;AAEA,uDAAuD,oBAAoB;;AAE3E;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,cAAc;AAC5B;AACA;AACA;AACA,gBAAgB,eAAe;AAC/B,oBAAoB;AACpB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,gCAAgC,mBAAmB;AACnD;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;ACtRA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB,mBAAmB;AACnB,qBAAqB;AACrB,sBAAsB;;AAEtB,iBAAiB;;AAEjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fcd671a589b9410700df","var Board = require(\"./board\");\n\nwindow.addEventListener(\"load\", function(){\n\n  var boardContainer = document.getElementById(\"game-board\");\n  var board = new Board(boardContainer);\n  board.generateSquares(10, 10, \"black\", \"white\");\n  board.draw();\n\n  board.setOnSquareClick(onSquareClick);\n});\n\nfunction logSquare(board, square){\n  console.log(square.center);\n}\n\nfunction onSquareClick(board, square){\n\n  if(square.position.x === 8  && square.position.y === 9){\n    board.addSavedState(\"save\");\n    return;\n  }\n  if(square.position.x === 9  && square.position.y === 9){\n    board.loadSavedState(\"save\");\n    return;\n  }\n\n  square.style.borderColour = \"orange\";\n  square.addImage(\"cat.png\", 1);\n  square.draw();\n}\n\nfunction onSquareClick1(square){\n  square.remove();\n}\n\nfunction testReloadView(board){\n  var ctx = board.context;\n\n  var imageData = ctx.getImageData(0, 0, board.width, board.height);\n  ctx.clearRect(0, 0, board.width, board.height);\n  ctx.putImageData(imageData, 0, 0);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/run.js\n// module id = 0\n// module chunks = 0","\nvar Square = require(\"./square\");\n\nfunction Board(container){\n\n  container.innerHTML = '<style type=\"text/css\">canvas{position: absolute;}</style>'\n\n  this.innerContainer = createInnerContainer(container);\n\n  var min = Math.min(this.innerContainer.offsetWidth, this.innerContainer.offsetHeight);\n\n  this.width = this.innerContainer.offsetWidth;\n  this.height = min;\n\n  var canvases = createCanvases(this.innerContainer, this.width, this.height);\n\n  this.drawLayer = canvases.drawLayer;\n  this.imageLayer = canvases.imageLayer;\n  this.clickLayer = canvases.clickLayer;\n\n  this.drawContext = this.drawLayer.getContext(\"2d\");\n  this.imageContext = this.imageLayer.getContext(\"2d\");\n  this.clickContext = this.clickLayer.getContext(\"2d\");\n  this.layersContexts = [this.drawContext, this.imageContext, this.clickContext];\n\n  this.drawContext.lineWidth = 1;\n\n  this.xSquareCount = 0;\n  this.ySquareCount = 0;\n\n  this.squares = [];\n\n  this.savedStates = {};\n\n  this.clickLayer.addEventListener(\"click\", function(event){\n    var square = this.getSquareByCoords(event.offsetX, event.offsetY);\n    if(square) square.onClick(this, square);\n  }.bind(this));\n\n  this.currentSquare = null;\n\n  this.clickLayer.addEventListener(\"mousemove\", function(event){\n    var x = event.offsetX;\n    var y = event.offsetY;\n    var square = this.getSquareByCoords(x, y);\n    if(square){\n      square.onHover(this, square);\n      if(square !== this.currentSquare){\n        square.onEnter(this, square);\n      }\n    }\n\n    if( this.currentSquare && ( (!square && this.currentSquare) || (square !== this.currentSquare) ) ){\n      this.currentSquare.onLeave(this, this.currentSquare);\n    }\n\n    this.currentSquare = square;\n  }.bind(this));\n\n  this.clickLayer.addEventListener(\"mouseout\", function(event){\n    if(this.currentSquare){\n      this.currentSquare.onLeave(this, this.currentSquare);\n      this.currentSquare = null;\n    }\n  }.bind(this));\n\n}\n\nfunction createInnerContainer(container){\n  innerContainer = document.createElement(\"div\");\n  container.appendChild(innerContainer);\n  innerContainer.style.height = \"inherit\";\n  return innerContainer;\n}\n\nfunction createCanvases(container, width, height){\n\n  result = {}\n\n  result.drawLayer = document.createElement(\"canvas\");\n  result.imageLayer = document.createElement(\"canvas\");\n  result.clickLayer = document.createElement(\"canvas\");\n\n  var setLayerSize = function(layer){\n    layer.width = width;\n    layer.height = height;\n  }\n\n  setLayerSize(result.drawLayer);\n  setLayerSize(result.imageLayer);\n  setLayerSize(result.clickLayer);\n\n  container.appendChild(result.drawLayer);\n  container.appendChild(result.imageLayer);\n  container.appendChild(result.clickLayer);\n\n  return result;\n}\n\nBoard.prototype.generateSquares = function(xCount, yCount, border, fill){\n  this.xSquareCount = xCount;\n  this.ySquareCount = yCount;\n\n  var squareWidth = this.width / xCount;\n  var squareHeight = this.height / yCount;\n\n  for(var x=0; x<this.width; x+=squareWidth){\n    var row = [];\n    this.squares.push(row);\n    var xPos = this.squares.length-1;\n    for(var y=0; y<this.height; y+=squareHeight){\n      var coords = {x: x, y: y};\n      var position = {x: xPos, y: row.length};\n      var nextSquare = new Square(this, coords, position, squareWidth, squareHeight, border, fill);\n      row.push(nextSquare);\n    }\n  }\n}\n\nBoard.prototype.draw = function(){\n  this.forEachSquare(function(square){\n    square.draw();\n  });\n}\n\nBoard.prototype.drawBorder = function(){\n  this.forEachSquare(function(square){\n    square.drawBorder();\n  });\n}\n\nBoard.prototype.translate = function(x, y){\n  for(var canvas of this.layersContexts){\n    canvas.translate(x, y);\n  }\n}\n\nBoard.prototype.setOnSquareClick = function(callBack){\n  this.forEachSquare(function(square){\n    square.onClick = callBack;\n  });\n}\n\nBoard.prototype.setOnSquareHover = function(callBack){\n  this.forEachSquare(function(square){\n    square.onHover = callBack;\n  });\n}\n\nBoard.prototype.setOnSquareEnter = function(callBack){\n  this.forEachSquare(function(square){\n    square.onEnter = callBack;\n  });\n}\n\nBoard.prototype.setOnSquareLeave = function(callBack){\n  this.forEachSquare(function(square){\n    square.onLeave = callBack;\n  });\n}\n\nBoard.prototype.cloneSquares = function(squares){\n  var clonedSqaures = [];\n\n  for(var row of squares){\n    var clonedRow = [];\n    clonedSqaures.push(clonedRow);\n    for(var square of row){\n      clonedRow.push(square.clone());\n    }\n  }\n  return clonedSqaures;\n}\n\nBoard.prototype.SavedState = function(board){\n  this.squares = board.cloneSquares(board.squares);\n  this.imageData = board.drawContext.getImageData(0,0,board.width,board.height);\n}\n\nBoard.prototype.addSavedState = function(key){\n  this.savedStates[key] = new this.SavedState(this);\n}\n\nBoard.prototype.loadSavedState = function(key){\n  var state = this.savedStates[key]\n  this.squares = this.cloneSquares(state.squares);\n  this.drawContext.putImageData(state.imageData, 0, 0);\n\n  this.imageContext.clearRect(0, 0, this.width, this.height);\n  this.forEachSquare(function(square){\n    if(square.style.image) square.drawImage();\n  });\n}\n\nBoard.prototype.removeSavedState = function(key){\n  delete this.savedStates[key];\n}\n\nBoard.prototype.getSquareByPosition = function(column, row){\n  if(!this.isPositionValid(row, column)){\n    return null;\n  }\n  return this.squares[column][row];\n};\n\nBoard.prototype.isPositionValid = function(column, row){\n\n  var isBetween = function(val, min, max){\n    return (val >= min && val < max);\n  }\n\n  return (\n    (isBetween(row, 0, this.xSquareCount)) ||\n    (isBetween(column, 0, this.ySquareCount))\n  )\n}\n\nBoard.prototype.getSquareTop = function(amount, column, row){\n  return this.getSquareByPosition(column, row-amount);\n};\n\nBoard.prototype.getSquareBottom = function(amount, column, row){\n  return this.getSquareByPosition(column, row+amount);\n};\n\nBoard.prototype.getSquareLeft = function(amount, column, row){\n  return this.getSquareByPosition(column-amount, row);\n};\n\nBoard.prototype.getSquareRight = function(amount, column, row){\n  return this.getSquareByPosition(column+amount, row);\n};\n\nBoard.prototype.getSquareTopLeft = function(amount, column, row){\n  return this.getSquareByPosition(column-amount, row-amount);\n};\n\nBoard.prototype.getSquareTopRight = function(amount, column, row){\n  return this.getSquareByPosition(column+amount, row-amount);\n};\n\nBoard.prototype.getSquareBottomLeft = function(amount, column, row){\n  return this.getSquareByPosition(column-amount, row+amount);\n};\n\nBoard.prototype.getSquareBottomRight = function(amount, column, row){\n  return this.getSquareByPosition(column+amount, row+amount);\n};\n\nBoard.prototype.getSquareByCoords = function(x, y){\n\n    var findPosition = function(coord, canvasSize, squareSize){\n      var position = 0;\n      for(var length=squareSize; length<canvasSize; length+=squareSize){\n        if(coord > length){\n          position++;\n        }else{\n          break;\n        }\n      }\n      return position;\n    }\n\n    var row = findPosition(y, this.height, this.height / this.ySquareCount);\n    var column = findPosition(x, this.width, this.width / this.xSquareCount);\n    return this.getSquareByPosition(column, row);\n}\n\nBoard.prototype.forEachSquare = function(callBack){\n  for(var row of this.squares){\n    for(var square of row){\n      if(callBack(square)){\n        return square;\n      };\n    }\n  }\n}\n\nmodule.exports = Board;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/board.js\n// module id = 1\n// module chunks = 0","function makeSqaureFromCorner(board, coords, position, width, height, borderColour, fillColour){\n  return new Square(board, coords, position, width, height, borderColour, fillColour);\n}\n\nfunction makeSqaureFromCenter(board, center, position, width, height, borderColour, fillColour){\n  var coords = {x: center.x-width/2, y: center.y-height/2};\n  return new Square(board, coords, position, width, height, borderColour, fillColour);\n}\n\nfunction Square(board, coords, position, width, height, borderColour, fillColour){\n\n  this.drawContext = board.drawContext;\n  this.imageContext = board.imageContext;\n\n  coords.x = Math.floor(coords.x);\n  coords.y = Math.floor(coords.y);\n\n  this.coordinates = coords;\n  this.position = position;\n  this.width = width;\n  this.height = height;\n\n  this.topLeft = {x: coords.x, y: coords.y};\n  this.topRight = {x: coords.x + width, y: coords.y};\n  this.bottomLeft = {x: coords.x, y: coords.y + height};\n  this.bottomRight = {x: coords.x + width, y: coords.y + height};\n\n  this.center = {x: coords.x + width/2, y: coords.y + height/2}\n\n  this.onClick = this.initialEvent;\n  this.onHover = this.initialEvent;\n  this.onEnter = this.initialEvent;\n  this.onLeave = this.initialEvent;\n\n  this.style = {\n    image: null,\n    imageSize: 1,\n    borderColour: borderColour,\n    fillColour: fillColour,\n  }\n\n  this.data = {};\n\n  this.squareSpace = 1.25;\n}\n\nSquare.prototype.initialEvent = function(board, square){}\n\nSquare.prototype.draw = function(){\n  this.drawFill();\n  if(this.style.image) this.drawImage();\n}\n\nSquare.prototype.drawBorder = function(){\n  var holdStrokeStyle = this.drawContext.strokeStyle;\n  this.drawContext.strokeStyle = this.style.borderColour;\n  this.drawContext.strokeRect(\n    this.coordinates.x+this.squareSpace, this.coordinates.y+this.squareSpace,\n    this.width-this.squareSpace*2, this.height-this.squareSpace*2\n  );\n  this.drawContext.strokeStyle = holdStrokeStyle;\n}\n\nSquare.prototype.drawFill = function(){\n  var holdFillStyle = this.drawContext.fillStyle;\n  this.drawContext.fillStyle = this.style.fillColour;\n  this.drawContext.fillRect(\n    this.coordinates.x+this.squareSpace, this.coordinates.y+this.squareSpace,\n    this.width-this.squareSpace*2, this.height-this.squareSpace*2\n  );\n  this.drawContext.fillStyle = holdFillStyle;\n\n  if(this.style.borderColour !== this.style.fillColour) this.drawBorder();\n}\n\nSquare.prototype.drawImage = function(){\n\n  this.imageTag = document.createElement(\"img\");\n\n  var calcPosition = function(coord, length, percentageSize){\n    var diff = (coord + length/2) - coord;\n    return coord + (diff * (1-percentageSize));\n  }\n\n  var x = calcPosition(this.coordinates.x, this.width, this.style.imageSize);\n  var y = calcPosition(this.coordinates.y, this.height, this.style.imageSize);\n\n  var width = this.width * this.style.imageSize;\n  var height = this.height * this.style.imageSize;\n\n  var onLoadImage = function(){\n    this.imageContext.drawImage(this.imageTag, x, y, width, height);\n    this.imageTag = undefined;\n  }.bind(this);\n  this.imageTag.src = this.style.image;\n\n  this.imageTag.addEventListener(\"load\", onLoadImage);\n}\n\nSquare.prototype.addImage = function(imageLink, percentageSize){\n  this.style.image = imageLink;\n  this.style.imageSize = percentageSize;\n}\n\nSquare.prototype.remove = function(){\n  this.removeDrawn();\n  this.removeImage();\n}\n\nSquare.prototype.removeDrawn = function(){\n  this.drawContext.clearRect(\n    this.coordinates.x+squareSpace, this.coordinates.y+squareSpace,\n    this.width-squareSpace*2, this.height+squareSpace*2\n  );\n}\n\nSquare.prototype.removeImage = function(){\n  this.imageContext.clearRect(\n    this.coordinates.x+squareSpace, this.coordinates.y+squareSpace,\n    this.width-squareSpace*2, this.height+squareSpace*2\n  );\n}\n\nSquare.prototype.isWithin = function(x, y){\n  return !(x < this.topLeft.x || x >= this.topRight.x) &&\n        !(y < this.topLeft.y || y >= this.bottomLeft.y);\n}\n\nSquare.prototype.copy = function(){\n\n  var emptyBoard = {\n    drawContext: null,\n    imageContext: null\n  }\n\n  var newSquare = new Square(\n    emptyBoard,\n    this.coordinates,\n    this.position,\n    this.width,\n    this.height,\n    null,\n    null\n  );\n\n  newSquare.onClick = this.onClick;\n  newSquare.onHover = this.onHover;\n  newSquare.onEnter = this.onEnter;\n  newSquare.onLeave = this.onLeave;\n\n  newSquare.drawContext = this.drawContext;\n  newSquare.imageContext = this.imageContext;\n\n  newSquare.style = this.copyObject(this.style);\n  newSquare.data = this.copyObject(this.data);\n\n  return newSquare;\n}\n\nSquare.prototype.copyObject = function(object){\n  var newObject = {};\n  for(var key of Object.keys(object)){\n    newObject[key] = object[key];\n  }\n  return newObject;\n}\n\nmodule.exports = Square;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/square.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}